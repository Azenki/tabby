(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2797],{14079:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(21644);/**
 * @license lucide-react v0.365.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},65063:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(21644);/**
 * @license lucide-react v0.365.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},67802:function(e,t,n){Promise.resolve().then(n.bind(n,44527))},44527:function(e,t,n){"use strict";n.r(t),n.d(t,{SOURCE_CARD_STYLE:function(){return e4},Search:function(){return e7}});var r=n(36164),l=n(3546),s=n(70652),o=n.n(s),i=n(11978),a=n(54767),d=n(1853),c=n(82030),u=n(72940),m=n(52807),f=n(12978),h=n(56575),x=n(2578),p=n(40055),v=n(21808),g=n(93877),j=n(43240),b=n(18500),w=n(28312),N=n(9010),y=n(24449),C=n(16784),k=n(98454),I=n(31159),S=n(4951),R=n(44645),E=n(80605),A=n(64566),Z=n(47241),M=n(17451),z=n(37266),_=n(11634),L=n(70410),F=n(57288),T=n(31458),D=n(81565),O=n(53538),P=n(57830),U=n(11208),V=n(29),H=n(72657),W=n(30601),q=n(6230),K=n(69579),B=n(23057),G=n(84381),Q=n(62226),$=n.n(Q),J=n(6797),Y=n.n(J),X=n(94909),ee=n(66686),et=n(5493),en=n(65122),er=n(73037),el=l.useLayoutEffect,es=function(e){var t=l.useRef(e);return el(function(){t.current=e}),t},eo=function(e,t){if("function"==typeof e){e(t);return}e.current=t},ei=function(e,t){var n=(0,l.useRef)();return(0,l.useCallback)(function(r){e.current=r,n.current&&eo(n.current,null),n.current=t,t&&eo(t,r)},[t])},ea={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},ed=function(e){Object.keys(ea).forEach(function(t){e.style.setProperty(t,ea[t],"important")})},ec=null,eu=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},em=function(){},ef=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],eh=!!document.documentElement.currentStyle,ex=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=ef.reduce(function(e,n){return e[n]=t[n],e},{}),r=n.boxSizing;if(""===r)return null;eh&&"border-box"===r&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var l=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),s=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:l,borderSize:s}};function ep(e,t,n){var r=es(n);l.useLayoutEffect(function(){var n=function(e){return r.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var ev=function(e){ep(window,"resize",e)},eg=function(e){ep(document.fonts,"loadingdone",e)},ej=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],eb=l.forwardRef(function(e,t){var n=e.cacheMeasurements,r=e.maxRows,s=e.minRows,o=e.onChange,i=void 0===o?em:o,a=e.onHeightChange,d=void 0===a?em:a,c=(0,er.Z)(e,ej),u=void 0!==c.value,m=l.useRef(null),f=ei(m,t),h=l.useRef(0),x=l.useRef(),p=function(){var e,t,l,o,i,a,c,u,f,p,v,g=m.current,j=n&&x.current?x.current:ex(g);if(j){x.current=j;var b=(e=g.value||g.placeholder||"x",void 0===(t=s)&&(t=1),void 0===(l=r)&&(l=1/0),ec||((ec=document.createElement("textarea")).setAttribute("tabindex","-1"),ec.setAttribute("aria-hidden","true"),ed(ec)),null===ec.parentNode&&document.body.appendChild(ec),o=j.paddingSize,i=j.borderSize,c=(a=j.sizingStyle).boxSizing,Object.keys(a).forEach(function(e){ec.style[e]=a[e]}),ed(ec),ec.value=e,u=eu(ec,j),ec.value=e,u=eu(ec,j),ec.value="x",p=(f=ec.scrollHeight-o)*t,"border-box"===c&&(p=p+o+i),u=Math.max(p,u),v=f*l,"border-box"===c&&(v=v+o+i),[u=Math.min(v,u),f]),w=b[0],N=b[1];h.current!==w&&(h.current=w,g.style.setProperty("height",w+"px","important"),d(w,{rowHeight:N}))}};return l.useLayoutEffect(p),ev(p),eg(p),l.createElement("textarea",(0,en.Z)({},c,{onChange:function(e){u||p(),i(e)},ref:f}))}),ew=n(23782),eN=n(74038),ey=n(98150),eC=n(90615),ek=n(3448),eI=n(3206),eS=n(48537),eR=n(54646),eE=n(64219),eA=n(89811),eZ=n(37034),eM=n(52569),ez=n(74630),e_=n(65858);let eL=(0,l.createContext)({});function eF(e){let{isReadingCode:t,isReadingFileList:n,readingCode:s,codeSourceId:o,serverCodeContexts:i,clientCodeContexts:a,onContextClick:d}=e,{contextInfo:c}=(0,l.useContext)(eL),u=((null==a?void 0:a.length)||0)+i.length,m=(0,l.useMemo)(()=>{if(!o)return;let e=null==c?void 0:c.sources.find(e=>(0,F.wO)(e.sourceKind)&&e.sourceId===o);return e},[o,c]),f=(0,l.useMemo)(()=>{let e=[];return(null==s?void 0:s.fileList)&&e.push("fileList"),(null==s?void 0:s.snippet)&&e.push("snippet"),e},[null==s?void 0:s.fileList,null==s?void 0:s.snippet]),h=(0,l.useMemo)(()=>f.slice().pop(),[f]);return(0,r.jsx)(e_.UQ,{collapsible:!0,type:"single",defaultValue:"readingCode",children:(0,r.jsxs)(e_.Qd,{value:"readingCode",className:"mb-6 border-0",children:[(0,r.jsx)(e_.o4,{className:"w-full py-2 pr-2",children:(0,r.jsxs)("div",{className:"flex flex-1 items-center justify-between pr-2",children:[(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-2",children:[(0,r.jsx)(D.IconCode,{className:"mx-1 h-5 w-5 shrink-0"}),(0,r.jsx)("span",{children:"Look into"}),!!m&&(0,r.jsxs)("div",{className:"inline-flex cursor-pointer items-center gap-0.5 font-medium",children:[(0,r.jsx)(eZ.k,{kind:m.sourceKind,className:"h-3.5 w-3.5 shrink-0"}),(0,r.jsx)("span",{className:"truncate",children:m.sourceName})]})]}),(0,r.jsx)("div",{children:u?(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[u," sources"]}):null})]})}),(0,r.jsx)(e_.vF,{className:"pb-0",children:(0,r.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(null==s?void 0:s.fileList)&&(0,r.jsx)(eT,{title:"Read codebase structure ...",isLoading:n,isLastItem:"fileList"===h},"fileList"),(null==s?void 0:s.snippet)&&(0,r.jsx)(eT,{title:"Search for relevant code snippets ...",isLoading:t,defaultOpen:!t,isLastItem:"snippet"===h,children:!!u&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"mt-1 flex flex-wrap gap-2 text-xs font-semibold",children:[null==a?void 0:a.map((e,t)=>(0,r.jsx)(eD,{context:e,onContextClick:e=>null==d?void 0:d(e,!0)},"client-".concat(t))),null==i?void 0:i.map((e,t)=>(0,r.jsx)(eD,{context:e,onContextClick:e=>null==d?void 0:d(e,!0)},"server-".concat(t)))]})})},"snippet")]})})]})})}function eT(e){let{isLoading:t,children:n,title:s,defaultOpen:o,isLastItem:i}=e,a="item",[d,c]=(0,l.useState)(!!o),u=!!n;return(0,l.useEffect)(()=>{u&&!d&&setTimeout(()=>{c(!0)},0)},[u]),(0,r.jsx)("div",{children:(0,r.jsx)(e_.UQ,{type:"single",value:d?a:"",collapsible:u,className:"z-10",onValueChange:e=>{c(e===a)},children:(0,r.jsxs)(e_.Qd,{value:a,className:"relative border-0",children:[(!i||d&&u)&&(0,r.jsx)("div",{className:"absolute left-3 top-5 block h-full w-0.5 shrink-0 translate-x-px rounded-full bg-muted"}),(0,r.jsx)(e_.o4,{className:"group w-full gap-2 rounded-lg py-1 pl-1.5 pr-2 !no-underline hover:bg-muted/70",showChevron:!!n,children:(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-4",children:[(0,r.jsx)("div",{className:"relative z-10 shrink-0 bg-background group-hover:bg-muted/70",children:t?(0,r.jsx)(D.IconSpinner,{className:"h-4 w-4"}):(0,r.jsx)(D.IconCheckFull,{className:"h-4 w-4"})}),(0,r.jsx)("span",{children:s})]})}),!!n&&(0,r.jsx)(e_.vF,{className:"pb-0 pl-10",children:n})]})})})}function eD(e){var t,n;let{context:s,onContextClick:o}=e,i=s.range&&!(0,ez.Z)(null===(t=s.range)||void 0===t?void 0:t.start)&&!(0,ez.Z)(null===(n=s.range)||void 0===n?void 0:n.end)&&s.range.start<s.range.end,a=s.filepath.split("/"),d=a.slice(0,a.length-1).join("/"),c=(0,l.useMemo)(()=>(0,F.UA)(s.filepath),[s.filepath]),u=(0,l.useMemo)(()=>{if(!s.range)return;let e="";return s.range.start&&(e=String(s.range.start)),i&&(e+="-".concat(s.range.end)),e},[s.range]);return(0,r.jsxs)(V.u,{delayDuration:100,children:[(0,r.jsx)(V.aJ,{asChild:!0,children:(0,r.jsxs)("div",{className:"cursor-pointer whitespace-nowrap rounded-md bg-muted px-1.5 py-0.5",onClick:e=>null==o?void 0:o(s),children:[(0,r.jsx)("span",{children:c}),u?(0,r.jsxs)("span",{className:"font-normal text-muted-foreground",children:[":",u]}):null]})}),(0,r.jsx)(V._v,{align:"start",children:(0,r.jsxs)("div",{className:"whitespace-nowrap",children:[(0,r.jsx)("span",{children:c}),u?(0,r.jsxs)("span",{className:"text-muted-foreground",children:[":",u]}):null,(0,r.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:d})]})})]})}function eO(e){var t,n,s,o,i,a,c,u,m,f,h;let{className:x,message:p,showRelatedQuestion:v,isLoading:g,isLastAssistantMessage:j,isDeletable:b,clientCode:w}=e,{onRegenerateResponse:N,onSubmitSearch:y,setDevPanelOpen:C,setConversationIdForDev:k,enableDeveloperMode:I,contextInfo:S,fetchingContextInfo:R,onDeleteMessage:E,isThreadOwner:A,onUpdateMessage:Z,repositories:M}=(0,l.useContext)(eL),{supportsOnApplyInEditorV2:z}=(0,l.useContext)(eI.p),[_,L]=(0,l.useState)(!1),[O,P]=(0,l.useState)(!1),[U,V]=(0,l.useState)(void 0),H=g?D.IconSpinner:D.IconSparkles,W=(0,l.useMemo)(()=>{var e;if(!p.codeSourceId||!(null==M?void 0:M.length))return"";let t=M.find(e=>e.sourceId===p.codeSourceId);return null!==(e=null==t?void 0:t.gitUrl)&&void 0!==e?e:""},[p.codeSourceId,M]),q=(0,l.useMemo)(()=>{var e;return(null==w?void 0:w.length)&&null!==(e=w.map(e=>({kind:"file",range:(0,F.OV)(e),filepath:e.filepath||"",content:e.content,git_url:W})))&&void 0!==e?e:[]},[w,W]),K=(0,l.useMemo)(()=>{var e,t,n;return null!==(n=null==p?void 0:null===(t=p.attachment)||void 0===t?void 0:null===(e=t.code)||void 0===e?void 0:e.map(e=>{var t,n;return{kind:"file",range:(0,F.OV)(e),filepath:e.filepath,content:e.content,git_url:e.gitUrl,commit:null!==(n=e.commit)&&void 0!==n?n:void 0,extra:{scores:null==e?void 0:null===(t=e.extra)||void 0===t?void 0:t.scores}}}))&&void 0!==n?n:[]},[null==p?void 0:null===(t=p.attachment)||void 0===t?void 0:t.code]),B=(0,l.useMemo)(()=>null==w?void 0:w.map(e=>({...e,gitUrl:W})),[w,W]),G=null==p?void 0:null===(n=p.attachment)||void 0===n?void 0:n.doc,Q=((null==B?void 0:B.length)||0)+((null===(o=p.attachment)||void 0===o?void 0:null===(s=o.code)||void 0===s?void 0:s.length)||0),$=(null==G?void 0:G.length)?Math.ceil(G.length/4)*e4.expand+.5*Math.floor(G.length/4)+.5:0,J=e=>{let t=(0,F.OV)(e);if(!e.filepath)return;let n=new URL("".concat(window.location.origin,"/files")),r=new URLSearchParams;r.append("redirect_filepath",e.filepath),r.append("redirect_git_url",e.gitUrl),e.commit&&r.append("redirect_rev",e.commit),n.search=r.toString();let l=(0,F.nO)(t);l&&(n.hash=l),window.open(n.toString())},Y=async e=>{let t=await Z(e);if(t)return t;L(!1)},ee=!!(null===(i=p.readingCode)||void 0===i?void 0:i.fileList)||!!(null===(u=p.attachment)||void 0===u?void 0:null===(c=u.codeFileList)||void 0===c?void 0:null===(a=c.fileList)||void 0===a?void 0:a.length),et=(null===(m=p.readingCode)||void 0===m?void 0:m.snippet)||!!Q;return(0,r.jsxs)("div",{className:(0,F.cn)("flex flex-col gap-y-5",x),children:[G&&G.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center gap-x-2",children:[(0,r.jsx)(D.IconBlocks,{className:"relative",style:{top:"-0.04rem"}}),(0,r.jsx)("p",{className:"text-sm font-bold leading-normal",children:"Sources"})]}),(0,r.jsx)("div",{className:"gap-sm -mx-2 grid grid-cols-3 gap-2 overflow-y-hidden px-2 pt-2 md:grid-cols-4",style:{transition:"height 0.25s ease-out",height:O?"".concat($,"rem"):"".concat(e4.compress+.5,"rem")},children:G.map((e,t)=>(0,r.jsx)(eP,{conversationId:p.id,source:e,showMore:O,showDevTooltip:I},e.link+t))}),(0,r.jsxs)(T.z,{variant:"ghost",className:"-ml-1.5 mt-1 flex items-center gap-x-1 px-1 py-2 text-sm font-normal text-muted-foreground",onClick:()=>P(!O),children:[(0,r.jsx)(D.IconChevronRight,{className:(0,F.cn)({"-rotate-90":O,"rotate-90":!O})}),(0,r.jsx)("p",{children:O?"Show less":"Show more"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-1 flex h-8 items-center gap-x-1.5",children:[(0,r.jsx)(H,{className:(0,F.cn)({"animate-spinner":g})}),(0,r.jsx)("p",{className:"text-sm font-bold leading-none",children:"Answer"}),I&&(0,r.jsx)(T.z,{variant:"ghost",size:"icon",onClick:()=>{k(p.id),C(!0)},children:(0,r.jsx)(D.IconBug,{})})]}),(ee||et)&&(0,r.jsx)(eF,{clientCodeContexts:q,serverCodeContexts:K,isReadingFileList:p.isReadingFileList,isReadingCode:p.isReadingCode,onContextClick:e=>{if(!e.filepath)return;let t=(0,F.XX)(window.location.origin,e);window.open(t,"_blank")},codeSourceId:p.codeSourceId,readingCode:{fileList:ee,snippet:et}}),g&&!p.content&&(0,r.jsx)(ek.O,{className:"mt-1 h-40 w-full"}),_?(0,r.jsx)(eV,{message:p,onCancel:()=>L(!1),onSubmit:Y}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eR.J,{message:p.content,attachmentDocs:G,attachmentClientCode:B,attachmentCode:null===(f=p.attachment)||void 0===f?void 0:f.code,onCodeCitationClick:e=>{e.gitUrl&&J(e)},onCodeCitationMouseEnter:e=>{var t,n;V(e-1-((null==p?void 0:null===(n=p.attachment)||void 0===n?void 0:null===(t=n.doc)||void 0===t?void 0:t.length)||0))},onCodeCitationMouseLeave:e=>{V(void 0)},contextInfo:S,fetchingContextInfo:R,canWrapLongLines:!g,supportsOnApplyInEditorV2:z}),p.error&&(0,r.jsx)(eR.m,{error:p.error}),!g&&!_&&(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between text-sm",children:[(0,r.jsx)("div",{className:"flex items-center gap-x-3",children:A&&(0,r.jsxs)(r.Fragment,{children:[!g&&!R&&j&&(0,r.jsxs)(T.z,{className:"flex items-center gap-x-1 px-1 font-normal text-muted-foreground",variant:"ghost",onClick:()=>N(p.id),children:[(0,r.jsx)(D.IconRefresh,{}),(0,r.jsx)("p",{children:"Regenerate"})]}),b&&(0,r.jsxs)(T.z,{className:"flex items-center gap-x-1 px-1 font-normal text-muted-foreground",variant:"ghost",onClick:()=>E(p.id),children:[(0,r.jsx)(D.IconTrash,{}),(0,r.jsx)("p",{children:"Delete"})]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,r.jsx)(eS.q,{className:"-ml-1.5 gap-x-1 px-1 font-normal text-muted-foreground",value:(e=>{var t,n,r,l,s,o,i,a,c,u,m;if((0,X.Z)(null==e?void 0:null===(t=e.attachment)||void 0===t?void 0:t.doc)&&(0,X.Z)(null==e?void 0:null===(n=e.attachment)||void 0===n?void 0:n.code))return e.content;let f=e.content.replace(eN.Hc,e=>{let t=null==e?void 0:e.match(/\d+/);return"[".concat(t,"]")}).trim(),h=null!==(c=null===(l=e.attachment)||void 0===l?void 0:null===(r=l.doc)||void 0===r?void 0:r.map((e,t)=>"[".concat(t+1,"] ").concat(e.link)).join("\n"))&&void 0!==c?c:"",x=null!==(u=null===(o=e.attachment)||void 0===o?void 0:null===(s=o.doc)||void 0===s?void 0:s.length)&&void 0!==u?u:0,p=null!==(m=null===(a=e.attachment)||void 0===a?void 0:null===(i=a.code)||void 0===i?void 0:i.map((e,t)=>{let n=(0,F.tf)(e),r=(0,d.Z)([e.filepath,n]).join(":");return"[".concat(t+x+1,"] ").concat(r)}).join("\n"))&&void 0!==m?m:"";return"".concat(f,"\n\nCitations:\n").concat(h+p)})(p),text:"Copy"}),A&&(0,r.jsxs)(T.z,{className:"flex items-center gap-x-1 px-1 font-normal text-muted-foreground",variant:"ghost",onClick:e=>L(!0),children:[(0,r.jsx)(D.IconEdit,{}),(0,r.jsx)("p",{children:"Edit"})]})]})]})]})]}),v&&!_&&!g&&p.threadRelevantQuestions&&p.threadRelevantQuestions.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-1.5",children:[(0,r.jsx)(D.IconLayers,{}),(0,r.jsx)("p",{className:"text-sm font-bold leading-none",children:"Suggestions"})]}),(0,r.jsx)("div",{className:"mt-2 flex flex-col gap-y-3",children:null===(h=p.threadRelevantQuestions)||void 0===h?void 0:h.map((e,t)=>(0,r.jsxs)("div",{className:"flex cursor-pointer items-center justify-between rounded-lg border p-4 py-3 transition-opacity hover:opacity-70",onClick:y.bind(null,e),children:[(0,r.jsx)("p",{className:"w-full overflow-hidden text-ellipsis text-sm",children:e}),(0,r.jsx)(D.IconPlus,{})]},t))})]})]})}function eP(e){var t,n;let{conversationId:s,source:o,showMore:i,showDevTooltip:a}=e,{setDevPanelOpen:d,setConversationIdForDev:c}=(0,l.useContext)(eL),[u,m]=(0,l.useState)(!1);return(0,r.jsxs)(eC.zs,{openDelay:100,closeDelay:100,children:[(0,r.jsxs)(V.u,{open:u,onOpenChange:e=>{a&&m(e)},delayDuration:0,children:[(0,r.jsx)(eC.Yi,{asChild:!0,children:(0,r.jsx)(V.aJ,{asChild:!0,children:(0,r.jsx)("div",{className:"relative flex cursor-pointer flex-col justify-between rounded-lg border bg-card p-3 hover:bg-card/60",style:{height:i?"".concat(e4.expand,"rem"):"".concat(e4.compress,"rem"),transition:"all 0.25s ease-out"},onClick:()=>window.open(o.link),children:(0,r.jsx)(eU,{source:o,showMore:i})})})}),(0,r.jsx)(V._v,{align:"start",className:"cursor-pointer p-2",onClick:e=>{e.stopPropagation(),c(s),d(!0)},children:(0,r.jsxs)("p",{children:["Score: ",null!==(n=null==o?void 0:null===(t=o.extra)||void 0===t?void 0:t.score)&&void 0!==n?n:"-"]})})]}),(0,r.jsx)(eC.bZ,{className:"w-96 bg-background text-sm text-foreground dark:border-muted-foreground/60",children:(0,r.jsx)(eE.Z,{relevantDocument:o})})]})}function eU(e){let{source:t,showMore:n}=e,{hostname:l}=new URL(t.link),s="MessageAttachmentIssueDoc"===t.__typename,o="MessageAttachmentPullDoc"===t.__typename,i="MessageAttachmentWebDoc"===t.__typename?void 0:t.author,a=(s||o)&&!!i;return(0,r.jsxs)("div",{className:"flex flex-1 flex-col justify-between gap-y-1",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,r.jsx)("p",{className:"line-clamp-1 w-full overflow-hidden text-ellipsis break-all text-xs font-semibold",children:t.title}),a&&(0,r.jsxs)("div",{className:"flex items-center gap-1 overflow-x-hidden",children:[(0,r.jsx)(eM.Yt,{user:i,className:"h-3.5 w-3.5 shrink-0"}),(0,r.jsx)("p",{className:"truncate text-xs font-medium text-muted-foreground",children:null==i?void 0:i.name})]}),(!a||n)&&(0,r.jsx)("p",{className:(0,F.cn)(" w-full overflow-hidden text-ellipsis break-all text-xs text-muted-foreground",!a&&n?"line-clamp-2":"line-clamp-1"),children:eH((0,F.L5)(t))})]}),(0,r.jsx)("div",{className:"flex items-center text-xs text-muted-foreground",children:(0,r.jsxs)("div",{className:"flex w-full flex-1 items-center justify-between gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(eA.V,{hostname:l}),(0,r.jsx)("p",{className:"ml-1 truncate",children:l.replace("www.","").split("/")[0]})]}),(0,r.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[s&&(0,r.jsxs)(r.Fragment,{children:[t.closed?(0,r.jsx)(D.IconCheckCircled,{className:"h-3.5 w-3.5"}):(0,r.jsx)(D.IconCircleDot,{className:"h-3.5 w-3.5"}),(0,r.jsx)("span",{children:t.closed?"Closed":"Open"})]}),o&&(0,r.jsxs)(r.Fragment,{children:[t.merged?(0,r.jsx)(D.IconGitMerge,{className:"h-3.5 w-3.5"}):(0,r.jsx)(D.IconGitPullRequest,{className:"h-3.5 w-3.5"}),t.merged?"Merged":"Open"]})]})]})})]})}function eV(e){let{message:t,onCancel:n,onSubmit:s}=e,o=ew.Ry({content:ew.Z_().trim()}),i=(0,et.cI)({resolver:(0,G.F)(o),defaultValues:{content:t.content}}),{isSubmitting:a}=i.formState,[d]=(0,l.useState)(t),c=async e=>{let t=await s({...d,content:e.content});t&&(0,_.zG)(i)(t)};return(0,r.jsx)(ey.l0,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(c),children:[(0,r.jsx)(ey.Wi,{control:i.control,name:"content",render:e=>{let{field:t}=e;return(0,r.jsxs)(ey.xJ,{children:[(0,r.jsx)(ey.NI,{children:(0,r.jsx)(eb,{autoFocus:!0,minRows:2,maxRows:20,className:"w-full rounded-lg border bg-background p-4 outline-ring",...t})}),(0,r.jsx)(ey.zG,{})]})}}),(0,r.jsxs)("div",{className:"my-4 flex items-center justify-between gap-2 px-2",children:[(0,r.jsx)("div",{children:(0,r.jsx)(ey.zG,{})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(T.z,{type:"button",variant:"outline",onClick:n,className:"min-w-[2rem]",children:"Cancel"}),(0,r.jsxs)(T.z,{type:"submit",disabled:a,children:[a&&(0,r.jsx)(D.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]})]})]})})}let eH=e=>{let t=$().sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),n=ee.TU.parse(t),r=Y().decode(n),l=r.replace(/<\/?[^>]+(>|$)/g,"");return l};var eW=n(90379);let eq=(0,l.lazy)(()=>n.e(726).then(n.t.bind(n,80726,23))),eK=e=>{let{value:t,isFullScreen:n,onToggleFullScreen:s,onClose:o}=e,[i]=(0,g.m3)(),{theme:a}=(0,N.X)(),d=(0,l.useRef)(null);return((0,l.useEffect)(()=>{if(t){var e;null===(e=d.current)||void 0===e||e.scrollTo({top:0,behavior:"smooth"})}},[t]),(null==i?void 0:i.value)&&open)?(0,r.jsxs)("div",{className:"flex h-full flex-col px-3 pt-2",children:[(0,r.jsx)("div",{className:"flex items-center justify-end pb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(T.z,{variant:"ghost",size:"icon",onClick:e=>s(!n),children:(0,r.jsx)(D.IconChevronDown,{className:(0,F.cn)("transition-all",n?"":"rotate-180")})}),(0,r.jsx)(T.z,{variant:"ghost",size:"icon",onClick:o,children:(0,r.jsx)(D.IconClose,{})})]})}),(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)(eW.cg,{className:"p-2"}),children:t?(0,r.jsx)(P.ScrollArea,{className:"flex-1",ref:d,children:(0,r.jsx)(eq,{theme:"dark"===a?"tomorrow":"rjv-default",src:t,style:{fontSize:"0.75rem"},collapseStringsAfterLength:120})}):null})]}):null};var eB=n(96274),eG=n(73460),eQ=n(68172),e$=n(61249),eJ=n(63743),eY=n(7449);let eX=(0,j.BX)("\n  mutation DeleteThread($id: ID!) {\n    deleteThread(id: $id)\n  }\n");function e0(e){let{threadIdFromURL:t,streamingDone:n,threadId:s}=e,o=(0,i.useRouter)(),{isThreadOwner:a}=(0,l.useContext)(eL),[d,c]=(0,l.useState)(!1),[u,m]=(0,l.useState)(!1),[f]=(0,g.B2)(),h=(0,_.Db)(eX,{onCompleted(e){e.deleteThread?o.replace("/"):(x.A.error("Failed to delete"),m(!1))},onError(e){x.A.error((null==e?void 0:e.message)||"Failed to delete"),m(!1)}}),p=e=>{e&&(0,z.wh)(),o.push("/")};return(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between px-4 lg:px-10",children:[(0,r.jsx)("div",{className:"flex items-center gap-x-6",children:(0,r.jsxs)(T.z,{variant:"ghost",className:"-ml-1 pl-0 text-sm text-muted-foreground",onClick:()=>p(),children:[(0,r.jsx)(D.IconChevronLeft,{className:"mr-1 h-5 w-5"}),"Home"]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[n&&t&&(0,r.jsx)(T.z,{variant:"ghost",className:"flex items-center gap-1 px-2 font-normal text-muted-foreground",onClick:()=>p(!0),children:(0,r.jsx)(D.IconPlus,{})}),n&&t&&a&&(0,r.jsxs)(eG.aR,{open:d,onOpenChange:c,children:[(0,r.jsx)(eG.vW,{asChild:!0,children:(0,r.jsx)(T.z,{size:"icon",variant:"hover-destructive",children:(0,r.jsx)(D.IconTrash,{})})}),(0,r.jsxs)(eG._T,{children:[(0,r.jsxs)(eG.fY,{children:[(0,r.jsx)(eG.f$,{children:"Delete this thread"}),(0,r.jsx)(eG.yT,{children:"Are you sure you want to delete this thread? This operation is not revertible."})]}),(0,r.jsxs)(eG.xo,{children:[(0,r.jsx)(eG.le,{children:"Cancel"}),(0,r.jsxs)(eG.OL,{className:(0,T.d)({variant:"destructive"}),onClick:e=>{e.preventDefault(),m(!0),h({id:t})},children:[u&&(0,r.jsx)(D.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Yes, delete it"]})]})]})]}),!!f.value&&n&&a&&s&&(0,r.jsx)(T.z,{variant:"ghost",onClick:()=>{t&&((0,eB.W)(t),o.push("/pages"))},className:"gap-1",children:"Convert to page"}),(0,r.jsx)(eQ.q,{children:(0,r.jsx)(eJ.T,{})}),(0,r.jsx)(e$.L,{className:"mr-4"}),(0,r.jsx)(eY.Z,{showHome:!1,showSetting:!0,beforeRouteChange:()=>{(0,z.wh)()},children:(0,r.jsx)(eM.SQ,{className:"h-10 w-10 border"})})]})]})}function e1(){return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(ek.O,{className:"w-full"}),(0,r.jsx)(ek.O,{className:"w-[70%]"})]}),(0,r.jsx)(ek.O,{className:"h-40 w-full"})]})}let e2=e=>{let{maxHeight:t=196,children:n}=e,[s,o]=(0,l.useState)(!0),[i,a]=(0,l.useState)(!1),d=(0,l.useRef)(null);return(0,l.useEffect)(()=>{d.current&&d.current.scrollHeight>t?a(!0):a(!1)},[t,n]),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{ref:d,className:(0,F.cn)("h-auto overflow-hidden",{"mb-8":i&&s}),style:{maxHeight:s?"".concat(t,"px"):"none"},children:n}),i&&(0,r.jsx)("div",{className:(0,F.cn)({"absolute right-0 -bottom-8 z-10":s,"flex justify-end my-1":!s}),children:(0,r.jsx)(T.z,{variant:"outline",size:"icon",onClick:()=>{o(!s)},children:(0,r.jsx)(D.IconChevronDown,{className:(0,F.cn)({"rotate-180":!s})})})}),s&&i&&(0,r.jsx)("div",{className:"absolute inset-x-0 bottom-0 h-9 bg-gradient-to-t from-background to-transparent"})]})};function e5(e){let{message:t,className:n,...s}=e,{contextInfo:o,fetchingContextInfo:i}=(0,l.useContext)(eL),{supportsOnApplyInEditorV2:a}=(0,l.useContext)(eI.p);return(0,r.jsx)("div",{className:(0,F.cn)("font-semibold",n),...s,children:(0,r.jsx)(e2,{children:(0,r.jsx)(eR.J,{message:t.content,contextInfo:o,supportsOnApplyInEditorV2:a,fetchingContextInfo:i,className:"text-xl prose-p:mb-2 prose-p:mt-0",headline:!0,canWrapLongLines:!0})})})}let e4={compress:5.3,expand:6.3},e3="_temp_msg_",e6=()=>"".concat(e3).concat((0,h.x0)());function e7(){var e,t,n,s,o;let m=(0,M.a)(e=>e.pendingUserMessage),[{data:h}]=(0,k.P)(),{updateUrlComponents:j,pathname:K}=(0,R.Z)(),[G,Q]=(0,l.useState)(),[$,J]=(0,l.useState)(!1),Y=(0,E.xG)(),[X,ee]=(0,l.useState)([]),[et,en]=(0,l.useState)(!0),[er,el]=(0,l.useState)(!!(null==m?void 0:m.content)),[es,eo]=(0,l.useState)(""),[ei,ea]=(0,l.useState)(""),ed=(0,l.useRef)(null),[ec,eu]=(0,l.useState)(!1),[em]=(0,W.Hb)(),ef=(0,i.useRouter)(),eh=(0,l.useRef)(!1),{theme:ex}=(0,N.X)(),[ep,ev]=(0,l.useState)(!1),[eg,ej]=(0,l.useState)(),eb=(0,l.useRef)(null),[ew,eN]=(0,l.useState)(45),ey=(0,l.useRef)(ew),[eC]=(0,g.m3)(),[ek,eI]=(0,l.useState)(),eS=(0,l.useMemo)(()=>{var e,t;if(G)return null===(t=G.match(/^\/search\/(.*)/))||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.split("-").pop()},[G]),eR=(0,_.Db)(e8),eE=async e=>{let t=X.findIndex(t=>t.id===e.id);if(!(t>-1)||!ek)return Error("Failed to save");{var n;let r=await eR({input:{threadId:ek,id:e.id,content:e.content}});if(null==r||null===(n=r.data)||void 0===n||!n.updateThreadMessage)return(null==r?void 0:r.error)||Error("Failed to save");await ee(n=>{let r=[...n];return r[t]=e,r})}};(0,l.useEffect)(()=>{eS&&eI(eS)},[eS]);let[{data:eA,fetching:eZ}]=(0,p.aM)({query:L.Gx}),[eM,ez]=(0,l.useState)(),[{data:e_,fetching:eF,error:eT}]=(0,p.aM)({query:L.XL,variables:{ids:[ek]},pause:!ek}),[{data:eD,error:eP,fetching:eU,stale:eV}]=(0,p.aM)({query:L.r4,variables:{threadId:ek,first:30,after:eM},pause:!ek||er});(0,l.useEffect)(()=>{var e,t,n,r;if(!eV){if(null==eD?void 0:null===(t=eD.threadMessages)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length){let e=eD.threadMessages.edges.map(e=>e.node).slice();ee(t=>(0,f.Z)([...t,...e],"id"))}if(null==eD?void 0:eD.threadMessages){let e=null==eD?void 0:null===(r=eD.threadMessages)||void 0===r?void 0:null===(n=r.pageInfo)||void 0===n?void 0:n.hasNextPage,t=null==eD?void 0:eD.threadMessages.pageInfo.endCursor;e&&t?ez(t):el(!0)}}},[eD]);let eH=(0,l.useMemo)(()=>{if(!h)return!1;if(!eS)return!0;let e=null==e_?void 0:e_.threads.edges[0];return!!e&&h.me.id===e.node.userId},[h,e_,eS]),eW=null==eA?void 0:eA.contextInfo.sources,eq=null==X?void 0:null===(e=X[0])||void 0===e?void 0:e.content,eB=(0,l.useMemo)(()=>eW&&eq?(0,F.i8)(eW,eq,{maxLength:v.$I}):"",[eW,eq]);(0,l.useEffect)(()=>{eB&&(document.title=eB)},[eB]),(0,l.useEffect)(()=>{eP&&!er&&el(!0)},[eP]);let{sendUserMessage:eG,isLoading:eQ,error:e$,answer:eJ,stop:eY,regenerate:eX,deleteThreadMessagePair:e2}=(0,A.x)({threadId:ek}),e4=(0,C.d)(eQ),{selectedModel:e7,isFetchingModels:tt,models:tn}=(0,I.Vq)(),{selectedRepository:tr,isFetchingRepositories:tl,repos:ts}=(0,S.Q)(),to=(0,l.useMemo)(()=>X.find(e=>e.id===eg),[eg,X]),ti=(0,l.useMemo)(()=>to?(0,c.Z)(null==to?void 0:to.attachment,"doc","code"):{answers:X.filter(e=>e.role===b.uU.Assistant).map(e=>(0,c.Z)(e,"doc","code"))},[eg,null==to?void 0:null===(t=to.attachment)||void 0===t?void 0:t.code,null==to?void 0:null===(n=to.attachment)||void 0===n?void 0:n.doc]);(0,l.useEffect)(()=>{Q(K),$||J(!0)},[K]),(0,l.useEffect)(()=>{$&&!eS&&(()=>{if(!eh.current){if(eh.current=!0,null==m?void 0:m.content){tm(m.content,m.context),(0,Z.UP)(void 0);return}ek||((0,z.wh)(),ef.replace("/"))}})()},[$]),(0,l.useEffect)(()=>{er&&setTimeout(()=>{eu(!0)},300)},[er]);let ta=(0,l.useMemo)(()=>!eS&&(0,u.Z)(X,e=>!!e.error),[eS,X]),{isCopied:td,onShare:tc}=function(e){let{threadIdFromURL:t,threadIdFromStreaming:n,streamingDone:r,updateThreadURL:l}=e,{isCopied:s,copyToClipboard:o}=(0,w.m)({timeout:2e3}),i=(0,_.Db)(L.md,{onError(e){x.A.error(e.message)}}),a=!t&&r&&n&&l,d=async()=>{if(s)return;let e=window.location.href;a&&(await i({threadId:n}),e=l(n)),o(e)};return{onShare:d,isCopied:s}}({threadIdFromURL:eS,threadIdFromStreaming:ek,streamingDone:!eQ,updateThreadURL:e=>{let t=(0,a.Z)(eB),n=(0,d.Z)([t,e]).join("-"),r=j({pathname:"/search/".concat(n),searchParams:{del:["q"]},replace:!0});return location.origin+r}});(0,l.useEffect)(()=>{var e,t,n,r;eJ.threadId&&eJ.threadId!==ek&&eI(eJ.threadId);let l=[...X],s=l.findIndex(e=>e.id===es),o=l.findIndex(e=>e.id===ei);if(-1===s||-1===o)return;let i=l[s],a=l[o];a.content=eJ.content,(null===(e=a.attachment)||void 0===e?void 0:e.code)||!eJ.attachmentsCode||(a.attachment={clientCode:null,doc:(null===(n=a.attachment)||void 0===n?void 0:n.doc)||null,code:eJ.attachmentsCode.map(e=>({...e.code,extra:{scores:e.scores}}))||null}),(null===(t=a.attachment)||void 0===t?void 0:t.doc)||!eJ.attachmentsDoc||(a.attachment={clientCode:null,doc:eJ.attachmentsDoc.map(e=>({...e.doc,extra:{score:e.score}}))||null,code:(null===(r=a.attachment)||void 0===r?void 0:r.code)||null}),a.threadRelevantQuestions=null==eJ?void 0:eJ.relevantQuestions,"isReadingCode"in eJ&&(a.isReadingCode=eJ.isReadingCode),"isReadingFileList"in eJ&&(a.isReadingFileList=eJ.isReadingFileList),a.readingCode=null==eJ?void 0:eJ.readingCode;let d=eJ.userMessageId,c=eJ.assistantMessageId;d&&c&&d!==i.id&&c!==a.id&&(i.id=d,a.id=c,eo(d),ea(c)),ee(l)},[eQ,eJ]),(0,l.useEffect)(()=>{if(e$){let e=[...X],t=e.find(e=>e.id===ei);t&&(t.error=e$?"401"===e$.message?"Unauthorized":(0,u.Z)(e$.graphQLErrors,e=>{var t;return(null===(t=e.extensions)||void 0===t?void 0:t.code)===v.ir})?"The thread has expired or does not exist.":e$.message||"Failed to fetch":"Failed to fetch")}},[e$]);let tu=(0,l.useRef)();(0,l.useEffect)(()=>(e4.current&&(tu.current=window.setTimeout(()=>{if(!e4.current)return;en(!0);let e=null==ed?void 0:ed.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},300)),e4.current||en(!1),()=>{window.clearTimeout(tu.current)}),[eQ]),(0,l.useEffect)(()=>{var e,t,n;ep?(null===(e=eb.current)||void 0===e||e.expand(),null===(t=eb.current)||void 0===t||t.resize(ew)):null===(n=eb.current)||void 0===n||n.collapse()},[ep]);let tm=(e,t)=>{let{sourceIdForCodeQuery:n,sourceIdsForDocQuery:r,searchPublic:l}=te(null==tr?void 0:tr.sourceId,t),s=e6(),o=e6(),i={id:s,role:b.uU.User,content:e},a={id:o,role:b.uU.Assistant,content:"",codeSourceId:n},d=n?{sourceId:n,content:e}:null;eo(s),ea(o),ee([...X].concat([i,a])),eG({content:e},{generateRelevantQuestions:!0,codeQuery:d,docQuery:{sourceIds:r,content:e,searchPublic:!!l},modelName:null==t?void 0:t.modelName})},tf=(0,l.useMemo)(()=>{var e,t;if(er&&!eF&&eS&&(eT||!(null==e_?void 0:null===(t=e_.threads)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length)))return eT||Error(v.ir)},[e_,eF,eT,er,eS]),[th]=(0,y.n)(eU||(null==eD?void 0:null===(o=eD.threadMessages)||void 0===o?void 0:null===(s=o.pageInfo)||void 0===s?void 0:s.hasNextPage),200),tx=(0,l.useMemo)(()=>{let e=[],t={question:null,answer:null};return X.forEach(n=>{n.role===b.uU.User?t.question=n:n.role!==b.uU.Assistant||t.answer||(t.answer=n,e.push(t),t={question:null,answer:null})}),e},[X]),tp=em?{height:"calc(100vh - ".concat(W.wt,")")}:{height:"100vh"};return Y?er&&(tf||eP)?(0,r.jsx)(e9,{error:tf||eP,threadIdFromURL:eS}):(0,r.jsx)(eL.Provider,{value:{isLoading:eQ,onRegenerateResponse:()=>{var e;if(!ek||eZ)return;let t=X.length-1,n=t-1;if(-1===t||n<=-1)return;let r=X[n].id,l=X[t].id,s=X.slice(0,-2),o=X[n],i=X[t],a=(null==i?void 0:i.codeSourceId)||(null==tr?void 0:tr.sourceId),d={...o,id:e6()},c={id:e6(),role:b.uU.Assistant,content:"",codeSourceId:a,attachment:{code:null,doc:null,clientCode:null},error:void 0},u=(0,F.b)(d.content,null==eA?void 0:null===(e=eA.contextInfo)||void 0===e?void 0:e.sources),{sourceIdForCodeQuery:m,sourceIdsForDocQuery:f,searchPublic:h}=te(a,(0,F.G8)(u)),x=m?{sourceId:m,content:d.content}:null,p={sourceIds:f,content:d.content,searchPublic:h};eo(d.id),ea(c.id),ee([...s,d,c]),eX({threadId:ek,userMessageId:r,assistantMessageId:l,userMessage:{content:d.content},threadRunOptions:{generateRelevantQuestions:!0,codeQuery:x,docQuery:p,modelName:e7}})},onSubmitSearch:tm,setDevPanelOpen:ev,setConversationIdForDev:ej,isPathnameInitialized:$,enableDeveloperMode:eC.value,contextInfo:null==eA?void 0:eA.contextInfo,fetchingContextInfo:eZ,onDeleteMessage:e=>{if(!ek)return;let t=X.findIndex(t=>t.id===e),n=t-1,r=X[t-1];if(-1!==t&&(null==r?void 0:r.role)===b.uU.User){if(r.id.startsWith(e3)&&e.startsWith(e3)){let e=X.slice(0,n).concat(X.slice(t+1));ee(e);return}e2(ek,r.id,e).then(e=>{if(e){x.A.error(e);return}let r=X.slice(0,n).concat(X.slice(t+1));ee(r)})}},isThreadOwner:eH,onUpdateMessage:eE,repositories:ts},children:(0,r.jsx)("div",{className:"transition-all",style:tp,children:(0,r.jsxs)(O.pO,{direction:"vertical",onLayout:e=>{(null==e?void 0:e[1])&&eN(e[1])},children:[(0,r.jsxs)(O.ee,{children:[(0,r.jsx)(e0,{threadIdFromURL:eS,streamingDone:!eQ,threadId:ek}),(0,r.jsx)(q.Z,{loading:!er,fallback:(0,r.jsxs)("div",{className:"mx-auto mt-24 w-full space-y-10 px-4 pb-32 lg:max-w-4xl lg:px-0",children:[(0,r.jsx)(e1,{}),(0,r.jsx)(e1,{})]}),children:(0,r.jsxs)("main",{className:"h-[calc(100%-4rem)] pb-8 lg:pb-0",children:[(0,r.jsx)(P.ScrollArea,{className:"h-full",ref:ed,children:(0,r.jsx)("div",{className:"mx-auto px-4 pb-32 lg:max-w-4xl lg:px-0",children:(0,r.jsx)("div",{className:"flex flex-col",children:tx.map((e,t)=>{var n,s;let o=t===tx.length-1;return e.question?(0,r.jsxs)(l.Fragment,{children:[!!e.question&&(0,r.jsx)(e5,{className:"pb-2 pt-8",message:e.question},e.question.id),!!e.answer&&(0,r.jsx)(eO,{className:"pb-8 pt-2",message:e.answer,clientCode:null===(s=e.question)||void 0===s?void 0:null===(n=s.attachment)||void 0===n?void 0:n.clientCode,isLoading:eQ&&o,isLastAssistantMessage:o,showRelatedQuestion:o,isDeletable:!eQ&&X.length>2},e.answer.id),!o&&(0,r.jsx)(U.Z,{})]},e.question.id):null})})})}),(0,r.jsx)(H.K,{className:(0,F.cn)("!fixed !bottom-[5.4rem] !right-4 !top-auto z-40 border-muted-foreground lg:!bottom-[2.85rem]",{hidden:ep}),container:ed.current,offset:100,style:"dark"===ex?{"--background":"0 0% 12%"}:{}}),(0,r.jsxs)("div",{className:(0,F.cn)("fixed bottom-5 left-0 z-30 flex min-h-[3rem] w-full flex-col items-center gap-y-2",{"opacity-100 translate-y-0":ec,"opacity-0 translate-y-10":!ec,hidden:ep}),style:Object.assign({transition:"all 0.35s ease-out"},"dark"===ex?{"--background":"0 0% 12%"}:{}),children:[(0,r.jsxs)("div",{className:(0,F.cn)("absolute flex items-center gap-4"),style:eH?{top:"-2.5rem"}:void 0,children:[et&&(0,r.jsxs)(T.z,{className:"bg-background",variant:"outline",onClick:()=>eY(),children:[(0,r.jsx)(D.IconStop,{className:"mr-2"}),"Stop generating"]}),!et&&(0,r.jsxs)(V.u,{delayDuration:0,children:[(0,r.jsx)(V.aJ,{asChild:!0,children:(0,r.jsx)("span",{tabIndex:0,children:(0,r.jsxs)(T.z,{className:"gap-2 bg-background",variant:"outline",onClick:tc,disabled:ta,children:[ta?(0,r.jsx)(D.IconInfoCircled,{}):td?(0,r.jsx)(D.IconCheck,{className:"text-green-600"}):(0,r.jsx)(D.IconShare,{}),"Share Link"]})})}),(0,r.jsx)(V._v,{hidden:!ta,children:"Please resolve errors in messages before sharing this thread."})]})]}),eH&&(0,r.jsx)("div",{className:(0,F.cn)("relative z-20 flex justify-center self-stretch px-4"),children:(0,r.jsx)(B.Z,{onSearch:tm,className:"min-h-[5rem] lg:max-w-4xl",placeholder:"Ask a follow up question",isFollowup:!0,isLoading:eQ,contextInfo:null==eA?void 0:eA.contextInfo,fetchingContextInfo:eZ,modelName:e7,onSelectModel:e=>{(0,Z.Eg)(e)},repoSourceId:null==tr?void 0:tr.sourceId,onSelectRepo:e=>{(0,Z.xt)(e)},isInitializingResources:tt||tl,models:tn})})]})]})})]}),(0,r.jsx)(O.Dp,{className:(0,F.cn)("hidden !h-[4px] border-none bg-background shadow-[0px_-4px_4px_rgba(0,0,0,0.2)] hover:bg-blue-500 active:bg-blue-500 dark:shadow-[0px_-4px_4px_rgba(255,255,255,0.2)]",ep&&"block")}),(0,r.jsx)(O.ee,{collapsible:!0,collapsedSize:0,defaultSize:0,ref:eb,onCollapse:()=>ev(!1),className:"z-50",children:(0,r.jsx)(eK,{onClose:()=>ev(!1),value:ti,isFullScreen:100===ew,onToggleFullScreen:e=>{var t;let n=ey.current;e?n=100:100===n&&(n=45),null===(t=eb.current)||void 0===t||t.resize(n),eN(n),ey.current=ew}})})]})})}):null}let e8=(0,j.BX)("\n  mutation UpdateThreadMessage($input: UpdateMessageInput!) {\n    updateThreadMessage(input: $input)\n  }\n");function e9(e){let{error:t,threadIdFromURL:n}=e;return t.message===v.ir?(0,r.jsx)(K.default,{}):(0,r.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,r.jsx)(e0,{threadIdFromURL:n}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(D.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Something went wrong"})]}),(0,r.jsx)("div",{children:"Failed to fetch the thread, please refresh the page or start a new thread"}),(0,r.jsxs)(o(),{href:"/",onClick:z.wh,className:(0,F.cn)((0,T.d)(),"mt-4 gap-2"),children:[(0,r.jsx)(D.IconPlus,{}),(0,r.jsx)("span",{children:"New Thread"})]})]})})]})}function te(e,t){let n,r=[],l=!1;if(t){var s,o,i;r=(0,m.Z)((0,d.Z)([e,null==t?void 0:null===(s=t.codeSourceIds)||void 0===s?void 0:s[0]].concat(t.docSourceIds))),l=null!==(i=t.searchPublic)&&void 0!==i&&i,n=e||(null===(o=t.codeSourceIds)||void 0===o?void 0:o[0])||void 0}return{sourceIdsForDocQuery:r,sourceIdForCodeQuery:n,searchPublic:l}}},69579:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(36164),l=n(42891),s=n.n(l),o=n(70652),i=n.n(o),a=n(83332),d=n(76531),c=n(57288),u=n(68172),m=n(30601),f=n(63743),h=n(31458),x=n(52569),p=n(7449);function v(){let[e]=(0,m.Hb)(),t=e?{height:"calc(100vh - ".concat(m.wt,")")}:{height:"100vh"};return(0,r.jsxs)("div",{style:t,className:"flex flex-col",children:[(0,r.jsx)(g,{}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center",children:[(0,r.jsx)("h2",{className:"mt-4 text-6xl font-bold tracking-tight text-foreground sm:text-7xl",children:"404"}),(0,r.jsx)("p",{className:"mt-4 text-lg text-muted-foreground",children:"Oops, it looks like the page you're looking for doesn't exist."}),(0,r.jsx)(i(),{className:(0,c.cn)("mt-6",(0,h.d)()),href:"/",children:"Home"})]})]})}function g(){return(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4 lg:px-10",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(i(),{href:"/",children:[(0,r.jsx)(s(),{src:d.Z,alt:"logo",width:128,className:"dark:hidden"}),(0,r.jsx)(s(),{src:a.Z,alt:"logo",width:96,className:"hidden dark:block"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)(u.q,{children:(0,r.jsx)(f.T,{})}),(0,r.jsx)(p.Z,{showSetting:!0,children:(0,r.jsx)(x.SQ,{className:"h-10 w-10 border"})})]})]})}},23057:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var r=n(36164),l=n(3546),s=n(21808),o=n(9010),i=n(57288),a=n(29),d=n(6230);n(15812);var c=n(77246),u=n(94160),m=n(50292),f=n(59105),h=n(10155),x=n(19092),p=n(44516),v=n(16784),g=n(29952),j=n(83171);let b="mention",w=g.ZP.extend({addNodeView:()=>(0,p.fW)(j.t),renderText(e){let{node:t}=e;return"[[source:".concat(t.attrs.id,"]]")},addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}},kind:{default:null,parseHTML:e=>e.getAttribute("data-kind"),renderHTML:e=>e.kind?{"data-kind":e.kind}:{}}})});n(44750);var N=n(31022),y=n(45238),C=n(18500),k=n(81565);let I=(0,l.forwardRef)((e,t)=>{let{query:n,command:s,category:o}=e,{list:a,pending:d}=(0,l.useContext)(z),[c,u]=(0,l.useState)(0),m=(0,l.useMemo)(()=>{if(!(null==a?void 0:a.length))return[];let e=a.filter(e=>(0,i._q)(e.sourceKind)).map(e=>({type:"source",category:"doc",id:e.sourceId,label:e.sourceName,data:e})),t=a.filter(e=>(0,i.wO)(e.sourceKind)).map(e=>({type:"source",category:"code",id:e.sourceId,label:e.sourceName,data:e}));return"doc"===o?e:t},[o,a]),f=(0,l.useMemo)(()=>{if(!n)return m;let e=(0,y.go)(n,m,{key:e=>e.label});return e.map(e=>e.obj)},[n,m]),h=()=>{u((c+f.length-1)%f.length)},x=()=>{u((c+1)%f.length)},p=e=>{let t=f[e];t&&s({id:t.data.sourceId,label:t.label,kind:t.data.sourceKind})},v=()=>{p(c)};return(0,l.useEffect)(()=>u(0),[m]),(0,l.useImperativeHandle)(t,()=>({onKeyDown:e=>{let{event:t}=e;return"ArrowUp"===t.key?(h(),!0):"ArrowDown"===t.key?(x(),!0):"Enter"===t.key&&(v(),!0)}})),(0,r.jsx)("div",{className:"dropdown-menu max-h-[30vh] min-w-[20rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-2 text-popover-foreground shadow animate-in",children:d?(0,r.jsx)("div",{className:"px-2 py-1.5",children:(0,r.jsx)(k.IconSpinner,{})}):f.length?f.map((e,t)=>(0,r.jsx)(R,{onClick:()=>p(t),onMouseEnter:()=>u(t),title:e.label,data:e,isSelected:t===c},e.id)):(0,r.jsx)("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:(null==m?void 0:m.length)?(0,r.jsx)("span",{children:"No matches results"}):(0,r.jsx)("span",{children:"No results"})})})});function S(e){let{kind:t}=e;switch(t){case C.ri.Doc:return(0,r.jsx)(k.IconEmojiBook,{});case C.ri.Web:return(0,r.jsx)(k.IconEmojiGlobe,{});case C.ri.Git:return(0,r.jsx)(k.IconCode,{});case C.ri.Github:return(0,r.jsx)(k.IconGitHub,{});case C.ri.Gitlab:return(0,r.jsx)(k.IconGitLab,{});default:return null}}function R(e){let{isSelected:t,data:n,...s}=e,o=(0,l.useRef)(null);return(0,l.useLayoutEffect)(()=>{if(t&&o.current){var e;null===(e=o.current)||void 0===e||e.scrollIntoView({block:"nearest",inline:"nearest"})}},[t]),(0,r.jsxs)("div",{className:(0,i.cn)("flex cursor-pointer gap-1 rounded-md px-2 py-1.5 text-sm",{"bg-accent text-accent-foreground":t}),...s,ref:o,children:[(0,r.jsx)("span",{className:"flex h-5 shrink-0 items-center",children:(0,r.jsx)(S,{kind:n.data.sourceKind})}),(0,r.jsx)("span",{className:"flex-1",children:n.label})]})}I.displayName="MetionList";let E=e=>{let t=e.getJSON(),n=[],r=0,l=e=>{var t,s;"text"===e.type?r+=(null==e?void 0:null===(t=e.text)||void 0===t?void 0:t.length)||0:"mention"===e.type&&(null==e?void 0:null===(s=e.attrs)||void 0===s?void 0:s.id)&&n.push({id:e.attrs.id,label:e.attrs.label,kind:e.attrs.kind}),e.content&&e.content.forEach(l)};return l(t),n};var A=e=>{let{disabled:t,category:n,placement:r,char:l="@",pluginKey:s}=e;return{render:()=>{let e,t;return{onStart:l=>{let s=E(l.editor);e=new p.M_(I,{props:{...l,mentions:s,category:n},editor:l.editor}),l.clientRect&&(t=(0,N.ZP)("body",{getReferenceClientRect:l.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:r||"bottom-start",animation:"shift-away",maxWidth:"400px"}))},onUpdate(n){e.updateProps(n),n.clientRect&&t[0].setProps({getReferenceClientRect:n.clientRect})},onKeyDown(n){var r,l;return"Escape"===n.event.key?(t[0].hide(),!0):null!==(l=null===(r=e.ref)||void 0===r?void 0:r.onKeyDown(n))&&void 0!==l&&l},onExit(){t[0].destroy(),e.destroy()}}},char:l,pluginKey:s,command:e=>{var t,r,l;let{editor:s,range:o,props:a}=e;if("code"===n){!function(e,t,n){let r;let{doc:l}=e.state,s=e.state.selection.$from;l.descendants((e,t)=>!("mention"===e.type.name&&(0,i.wO)(e.attrs.kind))||(r=t,!1)),e.chain().deleteRange({from:t.from,to:t.to}).run();let o=void 0!==r,a=l.firstChild,d=o?[{type:b,attrs:n}]:[{type:b,attrs:n},{type:"text",text:" "}];if(a&&"paragraph"===a.type.name){let t=a.firstChild;if(t&&"mention"===t.type.name&&(0,i.wO)(t.attrs.kind)){let n=t.nodeSize;e.chain().deleteRange({from:1,to:1+n}).insertContentAt(1,d).focus().run()}else e.chain().insertContentAt(1,d).focus().run()}else e.chain().insertContentAt(0,d).focus().run();e.commands.focus(o?s.pos:s.pos+1)}(s,o,a);return}let d=s.view.state.selection.$to.nodeAfter,c=null==d?void 0:null===(t=d.text)||void 0===t?void 0:t.startsWith(" ");c&&(o.to+=1),s.chain().focus().insertContentAt(o,[{type:b,attrs:a},{type:"text",text:" "}]).run(),null===(l=s.view.dom.ownerDocument.defaultView)||void 0===l||null===(r=l.getSelection())||void 0===r||r.collapseToEnd()},allow:e=>{let{state:n,range:r}=e;if(t)return!1;let l=n.doc.resolve(r.from),s=n.schema.nodes[b],o=!!l.parent.type.contentMatch.matchType(s);return o}}};let Z=new h.H$("mention-doc");new h.H$("mention-code");let M=e=>x.hj.create({addKeyboardShortcuts(){return{Enter:t=>{let{editor:n}=t;return e(n),!0},"Shift-Enter":()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]})}}}),z=l.createContext({}),_=(0,l.forwardRef)((e,t)=>{let{editable:n,content:o,contextInfo:a,fetchingContextInfo:d,submitting:h,onSubmit:x,placeholder:g,onBlur:j,onFocus:b,onUpdate:N,autoFocus:y,className:C,editorClassName:k,placement:I}=e,[S,R]=(0,l.useState)(!d),E=(0,v.d)(e=>{if(h)return;let t=e.getText({blockSeparator:s.rZ}).trim();t&&(null==x||x(e))}),_=(0,l.useMemo)(()=>null!=a&&!!a.sources&&a.sources.some(e=>(0,i._q)(e.sourceKind)),[null==a?void 0:a.sources]),L=(0,p.jE)({editable:!!S&&n,immediatelyRender:!1,extensions:[c.Z,u.Z,f.Z,m.Z.configure({showOnlyWhenEditable:!1,placeholder:S?g||"Ask anything...":"Loading..."}),M(e=>{E.current(e)}),w.configure({deleteTriggerWithBackspace:!0,HTMLAttributes:{class:"mention"},suggestion:A({category:"doc",char:"@",pluginKey:Z,placement:"bottom"===I?"top-start":"bottom-start",disabled:!_})})],editorProps:{attributes:{class:(0,i.cn)("max-h-38 prose min-h-[3.5rem] max-w-none font-sans dark:prose-invert focus:outline-none prose-p:my-0",k)}},content:o,onBlur(e){null==j||j(e)},onFocus(e){null==b||b(e)},onUpdate(e){null==N||N(e)}},[S]);return((0,l.useImperativeHandle)(t,()=>({editor:L})),(0,l.useLayoutEffect)(()=>{L&&y&&L.commands.focus()},[L]),(0,l.useEffect)(()=>{d||S||R(!0)},[d]),L)?(0,r.jsx)(z.Provider,{value:{list:null==a?void 0:a.sources,pending:!!d},children:(0,r.jsx)("div",{className:(0,i.cn)("text-area-autosize max-h-36 overflow-y-auto pr-1",C),children:(0,r.jsx)(p.kg,{editor:L})})}):null});_.displayName="PromptEditor";var L=n(31458),F=n(11208),T=n(3448),D=n(62202);function O(e){let{models:t,value:n,onChange:l,isInitializing:s}=e,o=e=>{l(e)};return(0,r.jsx)(d.Z,{loading:s,fallback:(0,r.jsx)("div",{className:"w-full pl-2",children:(0,r.jsx)(T.O,{className:"h-3 w-[20%]"})}),children:!!(null==t?void 0:t.length)&&(0,r.jsxs)(D.h_,{children:[(0,r.jsx)(D.$F,{asChild:!0,children:(0,r.jsxs)(L.z,{variant:"ghost",className:"gap-2 px-1.5 py-1 text-foreground/90",children:[(0,r.jsx)(k.IconBox,{}),n]})}),(0,r.jsx)(D.AW,{side:"bottom",align:"start",className:"dropdown-menu max-h-[30vh] min-w-[20rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-2 text-popover-foreground shadow animate-in",children:(0,r.jsx)(D._x,{value:n,onValueChange:l,children:t.map(e=>{let t=e===n;return(0,r.jsxs)(D.qB,{onClick:t=>{o(e),t.stopPropagation()},value:e,className:"cursor-pointer py-2 pl-3",children:[(0,r.jsx)(k.IconCheck,{className:(0,i.cn)("mr-2 shrink-0",e===n?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{className:(0,i.cn)({"font-medium":t}),children:e})]},e)})})})]})})}var P=n(36065),U=n(84942),V=n(37034);function H(e){let{repos:t,value:n,onChange:s,isInitializing:o}=e,[a,c]=(0,l.useState)(!1),u=(0,l.useRef)(null),m=e=>{s(e)},f=()=>{requestAnimationFrame(()=>{u.current&&(u.current.scrollTop=0)})},h=n?null==t?void 0:t.find(e=>e.sourceId===n):void 0,x=null==h?void 0:h.sourceName;return o||(null==t?void 0:t.length)?(0,r.jsx)(d.Z,{loading:o,fallback:(0,r.jsx)("div",{className:"w-full pl-2",children:(0,r.jsx)(T.O,{className:"h-3 w-[10rem]"})}),children:(0,r.jsxs)(U.J2,{open:a,onOpenChange:c,children:[(0,r.jsx)(U.xo,{className:"outline-none",asChild:!0,children:(0,r.jsxs)(L.z,{variant:"ghost",className:"gap-2 px-1.5 py-1 font-normal text-foreground/90",title:x||"select codebase",children:[h?(0,r.jsx)(V.k,{kind:h.sourceKind,className:"h-3.5 w-3.5 shrink-0"}):(0,r.jsx)(k.IconFolderGit,{className:"shrink-0"}),(0,r.jsx)("div",{className:"flex flex-1 items-center gap-1.5 truncate break-all",children:(0,r.jsx)("span",{className:(0,i.cn)("truncate",{"text-muted-foreground":!x}),children:x||"Codebase"})})]})}),(0,r.jsx)(U.yk,{side:"bottom",align:"start",className:"max-h-[50vh] min-w-[20vw] max-w-[80vw] overflow-x-hidden rounded-md border bg-popover p-2 pb-0 text-popover-foreground shadow animate-in",children:(0,r.jsxs)(P.mY,{children:[(0,r.jsx)(P.sZ,{placeholder:"Search codebase...",onValueChange:()=>{f()}}),(0,r.jsxs)(P.e8,{className:"max-h-[30vh]",ref:u,children:[(0,r.jsx)(P.rb,{children:"No context found"}),(0,r.jsx)(P.fu,{children:null==t?void 0:t.map(e=>{let t=e.sourceId===n;return(0,r.jsxs)(P.di,{onSelect:()=>{m(e.sourceId),c(!1)},title:e.sourceName,children:[(0,r.jsx)(k.IconCheck,{className:(0,i.cn)("mr-1 shrink-0",e.sourceId===n?"opacity-100":"opacity-0")}),(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-1 overflow-x-hidden",children:[(0,r.jsx)(V.k,{kind:e.sourceKind,className:"shrink-0"}),(0,r.jsx)("div",{className:(0,i.cn)("truncate",{"font-semibold":t}),children:e.sourceName})]})]},e.sourceId)})})]}),(0,r.jsx)(P.zz,{}),(0,r.jsx)(P.fu,{children:(0,r.jsx)(P.di,{disabled:!n,className:"flex justify-center",onSelect:()=>{s(void 0),c(!1)},children:"Clear"})})]})})]})}):null}function W(e){let{onSearch:t,modelName:n,onSelectModel:o,repoSourceId:c,onSelectRepo:u,className:m,placeholder:f,showBetaBadge:h,isLoading:x,autoFocus:p,loadingWithSpinning:v,cleanAfterSearch:g=!0,isFollowup:j,contextInfo:b,fetchingContextInfo:w,isInitializingResources:N,models:y}=e,[C,I]=(0,l.useState)(!1),[S,R]=(0,l.useState)(""),E=(0,l.useRef)(null),A=()=>{var e,t;null===(t=E.current)||void 0===t||null===(e=t.editor)||void 0===e||e.commands.focus()},Z=e=>{o(e),setTimeout(()=>{A()})},M=e=>{u(e),setTimeout(()=>{A()})},z=e=>{if(!e||x||N)return;let r=e.getText({blockSeparator:s.rZ}).trim();if(!r)return;let l=(0,i.b)(r,null==b?void 0:b.sources),o={...(0,i.G8)(l),modelName:n};if(t(r,o),g){var a,d;null===(d=E.current)||void 0===d||null===(a=d.editor)||void 0===a||a.chain().clearContent().focus().run(),R("")}},D=e=>{var t;let n=null===(t=E.current)||void 0===t?void 0:t.editor;n&&n.chain().focus().command(t=>{var n,r,l;let{tr:s,state:o}=t,{$from:i}=o.selection,a=0===i.parentOffset,d=null!==(l=null===(r=i.nodeBefore)||void 0===r?void 0:null===(n=r.text)||void 0===n?void 0:n.endsWith(" "))&&void 0!==l&&l;return a||d?s.insertText(e):s.insertText(" "+e),!0}).run()},{hasDocumentSource:P}=(0,l.useMemo)(()=>(0,i.xV)(null==b?void 0:b.sources),[null==b?void 0:b.sources]),U=(0,l.useMemo)(()=>null==b?void 0:b.sources.filter(e=>(0,i.wO)(e.sourceKind)),[null==b?void 0:b.sources]),V=!!(null==y?void 0:y.length),W=!!(null==U?void 0:U.length),K=V||W;return(0,r.jsxs)("div",{className:(0,i.cn)("relative w-full overflow-hidden rounded-xl border bg-background transition-all hover:border-ring dark:border-muted-foreground/60 dark:hover:border-muted-foreground",{"border-ring dark:border-muted-foreground":C},m),onClick:()=>{A()},children:[h&&(0,r.jsx)(q,{}),(0,r.jsxs)("div",{className:(0,i.cn)("flex items-end pr-4",{"min-h-[5.5rem]":!j,"min-h-[2.5rem]":j}),children:[(0,r.jsxs)("div",{className:"mr-1 flex-1 overflow-x-hidden pl-4",children:[(0,r.jsx)(_,{editable:!0,contextInfo:b,fetchingContextInfo:w,onSubmit:z,placeholder:f||"Ask anything...",autoFocus:p,onFocus:()=>I(!0),onBlur:()=>I(!1),onUpdate:e=>{let{editor:t}=e;return R(t.getText({blockSeparator:s.rZ}).trim())},ref:E,placement:j?"bottom":"top",className:(0,i.cn)("text-area-autosize resize-none rounded-lg !border-none bg-transparent !shadow-none !outline-none !ring-0 !ring-offset-0",{"py-3":!h,"py-4":h}),editorClassName:j&&K?"min-h-[1.75rem]":"min-h-[3.5em]"}),j&&K&&(0,r.jsxs)("div",{className:"-ml-2 mb-2 flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[W&&(0,r.jsx)(H,{isInitializing:w,repos:U,value:c,onChange:M}),W&&V&&(0,r.jsx)(F.Z,{orientation:"vertical",className:"h-5"}),V&&(0,r.jsx)(O,{isInitializing:N,models:y,value:n,onChange:Z})]})]}),(0,r.jsx)("div",{className:(0,i.cn)("mb-3 flex items-center justify-between gap-2"),children:(0,r.jsxs)("div",{className:(0,i.cn)("flex items-center justify-center rounded-lg p-1 transition-all",{"bg-primary text-primary-foreground cursor-pointer":S.length>0,"!bg-muted !text-primary !cursor-default":x||0===S.length||N,"mr-1.5":!h}),onClick:()=>{var e;return z(null===(e=E.current)||void 0===e?void 0:e.editor)},children:[v&&x&&(0,r.jsx)(k.IconSpinner,{className:"h-4 w-4"}),(!v||!x)&&(0,r.jsx)(k.IconArrowRight,{className:"h-4 w-4"})]})})]}),!j&&(0,r.jsx)("div",{className:(0,i.cn)("flex items-center gap-2 border-t bg-[#F9F6EF] py-2 pl-2 pr-4 dark:border-muted-foreground/60 dark:bg-[#333333]"),onClick:e=>e.stopPropagation(),children:(0,r.jsxs)(d.Z,{loading:N||w,delay:0,fallback:(0,r.jsx)("div",{className:"flex h-8 w-[40%] items-center",children:(0,r.jsx)(T.O,{className:"h-4 w-full"})}),children:[(0,r.jsxs)(a.u,{children:[(0,r.jsx)(a.aJ,{asChild:!0,children:(0,r.jsxs)(L.z,{variant:"ghost",className:"gap-2 px-1.5 py-1 text-foreground/90",onClick:e=>D("@"),disabled:!P,children:[(0,r.jsx)(k.IconAtSign,{}),"Documents"]})}),(0,r.jsx)(a._v,{className:"max-w-md",children:"Select a document to bring into context"})]}),(0,r.jsx)(F.Z,{orientation:"vertical",className:"h-5"}),(0,r.jsx)(H,{repos:U,value:c,onChange:M,isInitializing:w}),!!(null==y?void 0:y.length)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.Z,{orientation:"vertical",className:"h-5"}),(0,r.jsx)(O,{models:y,value:n,onChange:Z})]})]})})]})}function q(){let{theme:e}=(0,o.X)();return(0,r.jsxs)(a.u,{delayDuration:0,children:[(0,r.jsx)(a.aJ,{asChild:!0,children:(0,r.jsx)("span",{className:"absolute -right-8 top-1 mr-3 rotate-45 rounded-none border-none py-0.5 pl-6 pr-5 text-xs text-primary",style:{background:"dark"===e?"#333":"#e8e1d3"},children:"Beta"})}),(0,r.jsx)(a._v,{sideOffset:-8,className:"max-w-md",children:(0,r.jsx)("p",{children:"Please note that the answer engine is still in its early stages, and certain functionalities, such as finding the correct code context and the quality of summarizations, still have room for improvement. If you encounter an issue and believe it can be enhanced, consider sharing it in our Slack community!"})})]})}},73460:function(e,t,n){"use strict";n.d(t,{OL:function(){return v},_T:function(){return m},aR:function(){return a},f$:function(){return x},fY:function(){return f},le:function(){return g},vW:function(){return d},xo:function(){return h},yT:function(){return p}});var r=n(36164),l=n(3546),s=n(28961),o=n(57288),i=n(31458);let a=s.fC,d=s.xz,c=e=>{let{className:t,children:n,...l}=e;return(0,r.jsx)(s.h_,{className:(0,o.cn)(t),...l,children:(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:n})})};c.displayName=s.h_.displayName;let u=l.forwardRef((e,t)=>{let{className:n,children:l,...i}=e;return(0,r.jsx)(s.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm transition-opacity animate-in fade-in",n),...i,ref:t})});u.displayName=s.aV.displayName;let m=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(s.VY,{ref:t,className:(0,o.cn)("fixed z-50 grid w-full max-w-lg scale-100 gap-4 border bg-background p-6 opacity-100 shadow-lg animate-in fade-in-90 slide-in-from-bottom-10 sm:rounded-lg sm:zoom-in-90 sm:slide-in-from-bottom-0 md:w-full",n),...l})]})});m.displayName=s.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};f.displayName="AlertDialogHeader";let h=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};h.displayName="AlertDialogFooter";let x=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold",n),...l})});x.displayName=s.Dx.displayName;let p=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",n),...l})});p.displayName=s.dk.displayName;let v=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.aU,{ref:t,className:(0,o.cn)((0,i.d)(),n),...l})});v.displayName=s.aU.displayName;let g=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.$j,{ref:t,className:(0,o.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",n),...l})});g.displayName=s.$j.displayName},98150:function(e,t,n){"use strict";n.d(t,{NI:function(){return p},Wi:function(){return u},l0:function(){return d},lX:function(){return x},pf:function(){return v},xJ:function(){return h},zG:function(){return g}});var r=n(36164),l=n(3546),s=n(74047),o=n(5493),i=n(57288),a=n(5266);let d=o.RV,c=l.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(o.Qr,{...t})})},m=()=>{let e=l.useContext(c),t=l.useContext(f),{getFieldState:n,formState:r}=(0,o.Gc)(),s=e.name||"root",i=n(s,r);if(!r)throw Error("useFormField should be used within <Form>");let{id:a}=t;return{id:a,name:s,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formMessageId:"".concat(a,"-form-item-message"),...i}},f=l.createContext({}),h=l.forwardRef((e,t)=>{let{className:n,...s}=e,o=l.useId();return(0,r.jsx)(f.Provider,{value:{id:o},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",n),...s})})});h.displayName="FormItem";let x=l.forwardRef((e,t)=>{let{className:n,required:l,...s}=e,{error:o,formItemId:d}=m();return(0,r.jsx)(a._,{ref:t,className:(0,i.cn)(o&&"text-destructive",l&&'after:ml-0.5 after:text-destructive after:content-["*"]',n),htmlFor:d,...s})});x.displayName="FormLabel";let p=l.forwardRef((e,t)=>{let{...n}=e,{error:l,formItemId:o,formDescriptionId:i,formMessageId:a}=m();return(0,r.jsx)(s.g7,{ref:t,id:o,"aria-describedby":l?"".concat(i," ").concat(a):"".concat(i),"aria-invalid":!!l,...n})});p.displayName="FormControl";let v=l.forwardRef((e,t)=>{let{className:n,...l}=e,{formDescriptionId:s}=m();return(0,r.jsx)("div",{ref:t,id:s,className:(0,i.cn)("text-sm text-muted-foreground",n),...l})});v.displayName="FormDescription";let g=l.forwardRef((e,t)=>{let{className:n,children:l,...s}=e,{error:o,formMessageId:a}=m(),d=o?String(null==o?void 0:o.message):l;return d?(0,r.jsx)("p",{ref:t,id:a,className:(0,i.cn)("text-sm font-medium text-destructive",n),...s,children:d}):null});g.displayName="FormMessage"},53538:function(e,t,n){"use strict";n.d(t,{Dp:function(){return a},ee:function(){return i},pO:function(){return o}});var r=n(36164),l=n(6618),s=n(57288);let o=e=>{let{className:t,...n}=e;return(0,r.jsx)(l.eh,{className:(0,s.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})},i=l.s_,a=e=>{let{withHandle:t,className:n,...o}=e;return(0,r.jsx)(l.OT,{className:(0,s.cn)("border-bg relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...o,children:t&&(0,r.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border"})})}},93877:function(e,t,n){"use strict";n.d(t,{B2:function(){return c},m3:function(){return a}});var r=n(3546);let l=(e,t)=>{let[n,l]=(0,r.useState)(t),[s,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let t=localStorage.getItem(e);t&&l(JSON.parse(t)),o(!1)},[]),[n,t=>{l(t),localStorage.setItem(e,JSON.stringify(t))},s]};class s{get value(){if("undefined"!=typeof localStorage){let e=localStorage.getItem(this.storageKey);if(e)return"true"===e}return this.defaultValue}constructor(e,t,n,r){this.storageKey=e,this.title=t,this.description=n,this.defaultValue=r}}class o{defineGlobalVar(){return new s(this.storageKey,this.title,this.description,this.defaultValue)}defineHook(){return()=>{let[e,t,n]=l(this.storageKey,this.defaultValue);return[{value:e,title:this.title,description:this.description,loading:n},()=>{t(!e)}]}}constructor(e,t,n,r){this.storageKey="EXP_".concat(e),this.title=t,this.description=n,this.defaultValue=null!=r&&r}}let i=new o("enable_developer_mode","Developer Mode","Enable the developer mode. The features involved include the Answer Engine.",!1);i.defineGlobalVar();let a=i.defineHook(),d=new o("enable_page","Page","Enable Page. This feature allows you to convert threads to page.",!1);d.defineGlobalVar();let c=d.defineHook()},31159:function(e,t,n){"use strict";n.d(t,{Vq:function(){return d}});var r=n(3546),l=n(21454),s=n(27257),o=n(3765),i=n(47241),a=n(17451);function d(){let{data:e,isLoading:t}=(0,l.ZP)("/v1beta/models",e=>(0,o.Z)(e,{errorHandler:()=>{throw Error("Fetch supported model failed.")}}),{shouldRetryOnError:!1}),n=(0,s.oR)(a.a,e=>e.selectedModel);return(0,r.useEffect)(()=>{if(!t){let t=function(e,t){if(!(null==t?void 0:t.length))return;let n=!!e&&t.includes(e);return n?e:t[0]}(n,null==e?void 0:e.chat);(0,i.Eg)(t)}},[t]),{isFetchingModels:t,selectedModel:n,models:null==e?void 0:e.chat}}},4951:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(3546),l=n(40055),s=n(17451),o=n(70410);function i(){let[{data:e,fetching:t}]=(0,l.aM)({query:o.K5}),n=null==e?void 0:e.repositoryList,i=(0,s.a)(e=>e.selectedRepoSourceId),a=(0,r.useMemo)(()=>{if((null==n?void 0:n.length)&&i)return n.find(e=>e.sourceId===i)},[n,i]);return{repos:n,isFetchingRepositories:t,selectedRepository:a}}},44645:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(3546),l=n(11978);function s(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),n=(0,l.useSearchParams)(),s=(0,r.useCallback)(e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,r]=e;return t.set(n,r)});let r=t.toString();return r.length>0?"?".concat(r):""},[n]),o=(0,r.useCallback)(r=>{let l=function(e,t,n){var r,l;let s=null===(r=n.searchParams)||void 0===r?void 0:r.set,o=null===(l=n.searchParams)||void 0===l?void 0:l.del,i=new URLSearchParams(t);s&&Object.entries(s).forEach(e=>{let[t,n]=e;return i.set(t,n)}),o&&(Array.isArray(o)?o.forEach(e=>i.delete(e)):i.delete(o));let a=i.toString(),d=e;return a.length>0&&(d+="?".concat(a)),n.hash&&(d+="#".concat(n.hash.replace(/^#/,""))),d}((null==r?void 0:r.pathname)||e,n,r);return r.replace?t.replace(l):t.push(l),l},[e,n]);return{pathname:e,router:t,searchParams:n,getQueryString:s,updateUrlComponents:o}}},96274:function(e,t,n){"use strict";n.d(t,{W:function(){return d},u:function(){return i}});var r=n(27257),l=n(85654);let s=[],o={pendingThreadId:void 0},i=(0,r.Ue)()((0,l.tJ)(()=>({...o}),{name:"tabby-page-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!s.includes(t)}))})),a=i.setState,d=e=>{a(()=>({pendingThreadId:e}))}},37266:function(e,t,n){"use strict";n.d(t,{CR:function(){return s},F0:function(){return i},wh:function(){return a}});var r=n(27257);let l={homePage:void 0},s=(0,r.Ue)()(()=>({...l})),o=s.setState,i=e=>o(()=>({homePage:e})),a=()=>o(()=>({homePage:void 0}))},15812:function(){},76531:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.526f7cf9.png",height:184,width:607,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASklEQVR4nGPsKQh1f/HshV/PqtNtagrC8p++//rDAgQM//9/ZWJifMZYnRqg9+bVq6iZ51+1SP/5ovH//z8eRgbGbwyMjPxA9n0AMi8g2L1xUkUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},43739:function(e,t,n){"use strict";n.d(t,{VY:function(){return V},ck:function(){return P},fC:function(){return O},xz:function(){return U}});var r=n(65122),l=n(3546),s=n(47091),o=n(85656),i=n(79869),a=n(65727),d=n(27250),c=n(72205),u=n(17989),m=n(29434),f=n(57541);let h="Accordion",x=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[p,v,g]=(0,o.B)(h),[j,b]=(0,s.b)(h,[g,u.p_]),w=(0,u.p_)(),N=l.forwardRef((e,t)=>{let{type:n,...s}=e;return l.createElement(p.Provider,{scope:e.__scopeAccordion},"multiple"===n?l.createElement(R,(0,r.Z)({},s,{ref:t})):l.createElement(S,(0,r.Z)({},s,{ref:t})))});N.propTypes={type(e){let t=e.value||e.defaultValue;return e.type&&!["single","multiple"].includes(e.type)?Error("Invalid prop `type` supplied to `Accordion`. Expected one of `single | multiple`."):"multiple"===e.type&&"string"==typeof t?Error("Invalid prop `type` supplied to `Accordion`. Expected `single` when `defaultValue` or `value` is type `string`."):"single"===e.type&&Array.isArray(t)?Error("Invalid prop `type` supplied to `Accordion`. Expected `multiple` when `defaultValue` or `value` is type `string[]`."):null}};let[y,C]=j(h),[k,I]=j(h,{collapsible:!1}),S=l.forwardRef((e,t)=>{let{value:n,defaultValue:s,onValueChange:o=()=>{},collapsible:i=!1,...a}=e,[c,u]=(0,d.T)({prop:n,defaultProp:s,onChange:o});return l.createElement(y,{scope:e.__scopeAccordion,value:c?[c]:[],onItemOpen:u,onItemClose:l.useCallback(()=>i&&u(""),[i,u])},l.createElement(k,{scope:e.__scopeAccordion,collapsible:i},l.createElement(Z,(0,r.Z)({},a,{ref:t}))))}),R=l.forwardRef((e,t)=>{let{value:n,defaultValue:s,onValueChange:o=()=>{},...i}=e,[a=[],c]=(0,d.T)({prop:n,defaultProp:s,onChange:o}),u=l.useCallback(e=>c((t=[])=>[...t,e]),[c]),m=l.useCallback(e=>c((t=[])=>t.filter(t=>t!==e)),[c]);return l.createElement(y,{scope:e.__scopeAccordion,value:a,onItemOpen:u,onItemClose:m},l.createElement(k,{scope:e.__scopeAccordion,collapsible:!0},l.createElement(Z,(0,r.Z)({},i,{ref:t}))))}),[E,A]=j(h),Z=l.forwardRef((e,t)=>{let{__scopeAccordion:n,disabled:s,dir:o,orientation:d="vertical",...u}=e,m=l.useRef(null),h=(0,i.e)(m,t),g=v(n),j=(0,f.gm)(o),b="ltr"===j,w=(0,a.M)(e.onKeyDown,e=>{var t;if(!x.includes(e.key))return;let n=e.target,r=g().filter(e=>{var t;return!(null!==(t=e.ref.current)&&void 0!==t&&t.disabled)}),l=r.findIndex(e=>e.ref.current===n),s=r.length;if(-1===l)return;e.preventDefault();let o=l,i=s-1,a=()=>{(o=l+1)>i&&(o=0)},c=()=>{(o=l-1)<0&&(o=i)};switch(e.key){case"Home":o=0;break;case"End":o=i;break;case"ArrowRight":"horizontal"===d&&(b?a():c());break;case"ArrowDown":"vertical"===d&&a();break;case"ArrowLeft":"horizontal"===d&&(b?c():a());break;case"ArrowUp":"vertical"===d&&c()}let u=o%s;null===(t=r[u].ref.current)||void 0===t||t.focus()});return l.createElement(E,{scope:n,disabled:s,direction:o,orientation:d},l.createElement(p.Slot,{scope:n},l.createElement(c.WV.div,(0,r.Z)({},u,{"data-orientation":d,ref:h,onKeyDown:s?void 0:w}))))}),M="AccordionItem",[z,_]=j(M),L=l.forwardRef((e,t)=>{let{__scopeAccordion:n,value:s,...o}=e,i=A(M,n),a=C(M,n),d=w(n),c=(0,m.M)(),f=s&&a.value.includes(s)||!1,h=i.disabled||e.disabled;return l.createElement(z,{scope:n,open:f,disabled:h,triggerId:c},l.createElement(u.fC,(0,r.Z)({"data-orientation":i.orientation,"data-state":function(e){return e?"open":"closed"}(f)},d,o,{ref:t,disabled:h,open:f,onOpenChange:e=>{e?a.onItemOpen(s):a.onItemClose(s)}})))}),F="AccordionTrigger",T=l.forwardRef((e,t)=>{let{__scopeAccordion:n,...s}=e,o=A(h,n),i=_(F,n),a=I(F,n),d=w(n);return l.createElement(p.ItemSlot,{scope:n},l.createElement(u.xz,(0,r.Z)({"aria-disabled":i.open&&!a.collapsible||void 0,"data-orientation":o.orientation,id:i.triggerId},d,s,{ref:t})))}),D=l.forwardRef((e,t)=>{let{__scopeAccordion:n,...s}=e,o=A(h,n),i=_("AccordionContent",n),a=w(n);return l.createElement(u.VY,(0,r.Z)({role:"region","aria-labelledby":i.triggerId,"data-orientation":o.orientation},a,s,{ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}}))}),O=N,P=L,U=T,V=D},17989:function(e,t,n){"use strict";n.d(t,{Fw:function(){return w},VY:function(){return I},fC:function(){return C},p_:function(){return x},wy:function(){return j},xz:function(){return k}});var r=n(65122),l=n(3546),s=n(65727),o=n(47091),i=n(27250),a=n(65292),d=n(79869),c=n(72205),u=n(96497),m=n(29434);let f="Collapsible",[h,x]=(0,o.b)(f),[p,v]=h(f),g=(0,l.forwardRef)((e,t)=>{let{__scopeCollapsible:n,open:s,defaultOpen:o,disabled:a,onOpenChange:d,...u}=e,[f=!1,h]=(0,i.T)({prop:s,defaultProp:o,onChange:d});return(0,l.createElement)(p,{scope:n,disabled:a,contentId:(0,m.M)(),open:f,onOpenToggle:(0,l.useCallback)(()=>h(e=>!e),[h])},(0,l.createElement)(c.WV.div,(0,r.Z)({"data-state":y(f),"data-disabled":a?"":void 0},u,{ref:t})))}),j=(0,l.forwardRef)((e,t)=>{let{__scopeCollapsible:n,...o}=e,i=v("CollapsibleTrigger",n);return(0,l.createElement)(c.WV.button,(0,r.Z)({type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":y(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled},o,{ref:t,onClick:(0,s.M)(e.onClick,i.onOpenToggle)}))}),b="CollapsibleContent",w=(0,l.forwardRef)((e,t)=>{let{forceMount:n,...s}=e,o=v(b,e.__scopeCollapsible);return(0,l.createElement)(u.z,{present:n||o.open},({present:e})=>(0,l.createElement)(N,(0,r.Z)({},s,{ref:t,present:e})))}),N=(0,l.forwardRef)((e,t)=>{let{__scopeCollapsible:n,present:s,children:o,...i}=e,u=v(b,n),[m,f]=(0,l.useState)(s),h=(0,l.useRef)(null),x=(0,d.e)(t,h),p=(0,l.useRef)(0),g=p.current,j=(0,l.useRef)(0),w=j.current,N=u.open||m,C=(0,l.useRef)(N),k=(0,l.useRef)();return(0,l.useEffect)(()=>{let e=requestAnimationFrame(()=>C.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.b)(()=>{let e=h.current;if(e){k.current=k.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();p.current=t.height,j.current=t.width,C.current||(e.style.transitionDuration=k.current.transitionDuration,e.style.animationName=k.current.animationName),f(s)}},[u.open,s]),(0,l.createElement)(c.WV.div,(0,r.Z)({"data-state":y(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!N},i,{ref:x,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style}}),N&&o)});function y(e){return e?"open":"closed"}let C=g,k=j,I=w},94219:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(30586),l=n(26581),s=n(81913),o=n(26329),i=n(84639),a=n(80143),d=function(e,t,n,r){if(!(0,i.Z)(e))return e;t=(0,s.Z)(t,e);for(var d=-1,c=t.length,u=c-1,m=e;null!=m&&++d<c;){var f=(0,a.Z)(t[d]),h=n;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(d!=u){var x=m[f];void 0===(h=r?r(x,f,m):void 0)&&(h=(0,i.Z)(x)?x:(0,o.Z)(t[d+1])?[]:{})}(0,l.Z)(m,f,h),m=m[f]}return e},c=function(e,t,n){for(var l=-1,o=t.length,i={};++l<o;){var a=t[l],c=(0,r.Z)(e,a);n(c,a)&&d(i,(0,s.Z)(a,e),c)}return i}},82157:function(e,t,n){"use strict";var r=n(57507);t.Z=function(e,t){return(0,r.Z)(e,t)}},77735:function(e,t,n){"use strict";var r=n(57507);t.Z=function(e,t,n){var l=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===l?(0,r.Z)(e,t,void 0,n):!!l}},82030:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(94219),l=n(79204),s=(0,n(43285).Z)(function(e,t){return null==e?{}:(0,r.Z)(e,t,function(t,n){return(0,l.Z)(e,n)})})},72940:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(43692),l=n(51722),s=n(39691),o=function(e,t){var n;return(0,s.Z)(e,function(e,r,l){return!(n=t(e,r,l))}),!!n},i=n(38813),a=n(77725),d=n(20568),c=n(26329),u=n(84639),m=function(e,t,n){if(!(0,u.Z)(n))return!1;var r=typeof t;return("number"==r?!!((0,d.Z)(n)&&(0,c.Z)(t,n.length)):"string"==r&&t in n)&&(0,a.Z)(n[t],e)},f=function(e,t,n){var s=(0,i.Z)(e)?r.Z:o;return n&&m(e,t,n)&&(t=void 0),s(e,(0,l.Z)(t,3))}},70783:function(e,t,n){"use strict";var r=n(19108);t.Z=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?(0,r.Z)(e,void 0,t):[]}}},function(e){e.O(0,[8415,7565,4648,6527,7430,55,641,340,4007,2546,1283,3449,2578,8511,240,4421,2287,7070,1454,1002,8961,4546,4553,6805,9275,9148,4405,2991,8964,5738,2812,6761,8030,4069,7288,1565,4656,9634,3206,3375,5289,1744],function(){return e(e.s=67802)}),_N_E=e.O()}]);